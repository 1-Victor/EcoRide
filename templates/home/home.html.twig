{% extends 'base.html.twig' %}

{% block title %}Accueil | EcoRide{% endblock %}

{% block body %}
{% include 'components/menu.html.twig' %}

<div class="container py-5">
    <h1 class="text-center text-success mb-4">Bienvenue sur EcoRide üå±</h1>

    <section class="mb-5">
        <h2>Qui sommes-nous ?</h2>
        <p>
            EcoRide est une startup fran√ßaise engag√©e pour l‚Äôenvironnement.
            Notre mission : faciliter le covoiturage √©co-responsable pour les trajets en voiture.
        </p>
        <div class="row mt-4">
            <div class="col-md-4"><img src="{{ asset('images/ecoride1.jpg') }}" class="img-fluid rounded" alt="Voiture √©lectrique 1"></div>
            <div class="col-md-4"><img src="{{ asset('images/ecoride2.jpg') }}" class="img-fluid rounded" alt="Voiture √©lectrique 2"></div>
            <div class="col-md-4"><img src="{{ asset('images/ecoride3.jpg') }}" class="img-fluid rounded" alt="Passagers heureux"></div>
        </div>
    </section>

    <section class="mb-5">
        <h2>Rechercher un itin√©raire</h2>

        <form method="get" action="{{ path('app_search') }}">
            <div class="row g-2">
                <div class="col-md-4">
                    <label for="from" class="form-label">Ville de d√©part</label>
                    <input type="text" name="from" id="from" class="form-control" required>
                </div>

                <div class="col-md-4">
                    <label for="to" class="form-label">Ville d‚Äôarriv√©e</label>
                    <input type="text" name="to" id="to" class="form-control" required>
                </div>

                <div class="col-md-4">
                    <label for="date" class="form-label">Date du voyage</label>
                    <input type="date" name="date" id="date" class="form-control" required>
                </div>
            </div>

            <hr class="my-4">

            <div class="row g-2">
                <div class="col-md-3">
                    <label class="form-label">√âcologique uniquement</label><br>
                    <input type="checkbox" name="eco" value="1"> ‚úÖ
                </div>

                <div class="col-md-3">
                    <label for="max_price" class="form-label">Prix maximum (‚Ç¨)</label>
                    <input type="number" name="max_price" id="max_price" class="form-control" step="0.01" min="0">
                </div>

                <div class="col-md-3">
                    <label for="max_duration" class="form-label">Dur√©e maximale (minutes)</label>
                    <input type="number" name="max_duration" id="max_duration" class="form-control" min="1">
                </div>

                <div class="col-md-3">
                    <label for="min_rating" class="form-label">Note minimale</label>
                    <input type="number" name="min_rating" id="min_rating" class="form-control" min="1" max="5" step="0.1">
                </div>
            </div>

            <div class="mt-4 d-flex justify-content-between">
                <button type="submit" class="btn btn-success">üîç Rechercher</button>
                <a href="{{ path('app_home') }}" class="btn btn-outline-danger">‚ùå R√©initialiser les filtres</a>
            </div>
        </form>
    </section>

    <section class="mt-5">
        <h2>üöò Trajets disponibles</h2>

        {% if carSharings is empty %}
            <p>Aucun covoiturage disponible actuellement.</p>
        {% else %}
            <ul class="list-group">
                {% for c in carSharings %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <strong>{{ c.startAddress }}</strong> ‚Üí <strong>{{ c.endAddress }}</strong><br>
                            D√©part : {{ c.dateStart|date('d/m/Y H:i') }}<br>
                            Conducteur : {{ c.user.username }}<br>
                            V√©hicule : {{ c.vehicle.brand }} {{ c.vehicle.model }}<br>
                            Prix : {{ c.price }} ‚Ç¨ ‚Ä¢ Places dispo : {{ c.availablePlaces }}
                            {% if c.ecoFriendly %}
                                <span class="badge bg-success">üå± √âco</span>
                            {% else %}
                                <span class="badge bg-danger">‚ùå Non √âco</span>
                            {% endif %}
                        </div>
                        <a href="{{ path('app_trajet_show', { id: c.id }) }}" class="btn btn-outline-primary btn-sm">D√©tail</a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </section>
</div>
{% endblock %}

{% block footer %}
<footer class="bg-light text-center py-4 mt-auto border-top">
    <p>Contact : <a href="mailto:contact@ecoride.fr">contact@ecoride.fr</a></p>
    <p><a href="#">Mentions l√©gales</a></p>
</footer>
{% endblock %}
